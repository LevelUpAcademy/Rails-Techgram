<h1>Novo post</h1>

<%= form_for @post, url: posts_create_path do |f| %>

<div class="row">
  <div class="col-md-6">
    <img src="#" id="preview-image" class="preview-image"/>
  </div>
</div>
  
  <div class="form-group">
    <label class="form-label">Imagem</label>
    <%= f.file_field :post_image, multiple: false, class: 'form-control' %>
  </div>

  <div class="form-group">
    <label class="form-label">Description</label>
    <%= f.text_area :description, class: 'form-control' %>
  </div>

  <%= f.submit "Salvar", class: 'btn btn-primary' %>
  <%= link_to "Cancelar", root_path, class: 'btn btn-default' %>
<% end %>


<script>
    function readURL(input) {

        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#preview-image').attr('src', e.target.result);
            }

            reader.readAsDataURL(input.files[0]);
        }
    }

    $("#post_post_image").change(function(){
        readURL(this);
    });
</script>
